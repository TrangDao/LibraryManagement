<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:body>
    <ui:composition template="template/common.xhtml">
        <ui:define name="content">
            <h:form styleClass="form-horizontal" id="requestForm">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 title">Request Detail</div>
                    </div>


                    <!-- Search input field -->
                    <p:fieldset id="request-detail" styleClass="row">
                        <div class="form-group">
                            <div class="col-md-4">
                                <h:outputLabel styleClass="sub-title col-md-12">Member info</h:outputLabel>
                                <!-- Row 1 -->
                                <div class="form-horizontal">
                                    <!-- Admin -->
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <h:outputLabel class="control-label pull-right">Admin</h:outputLabel>
                                        </div>
                                        <div class="col-sm-6">
                                            <p:inputText styleClass="form-control" disabled="true"
                                                         value="Admin"></p:inputText>
                                        </div>
                                    </div>

                                    <!-- User -->
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <h:outputLabel
                                                    styleClass="pull-right control-label">Username</h:outputLabel>
                                        </div>
                                        <div class="col-sm-6">
                                            <p:selectOneMenu value="#{borrowBean.selectedUserId}"
                                                             style="width:165px">
                                                <f:selectItems value="#{borrowBean.listUserId}"
                                                               var="userId"
                                                               itemLabel="#{borrowBean.getUserName(userId)}"
                                                />
                                            </p:selectOneMenu>
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <!-- 2nd column-->
                            <div class="col-md-8 verticalLine">
                                <h:outputLabel styleClass="sub-title margin-left-15">Book info</h:outputLabel>
                                <!-- Row 1 -->
                                <div class="form-horizontal form-group row">
                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15">
                                                <h:outputLabel class="control-label">Book ID </h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:inputText styleClass="form-control" disabled="true"
                                                             value="#{borrowBean.book.BId}"/>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15">
                                                <h:outputLabel class="control-label">Author </h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:inputText styleClass="form-control" disabled="true"
                                                             value="#{borrowBean.book.BAuthor}"/>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <!-- Row 2 -->
                                <div class="form-horizontal form-group row">
                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15 no-padding-right">
                                                <h:outputLabel class="control-label ">Book title</h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:inputText styleClass="form-control" disabled="true"
                                                             value="#{borrowBean.book.BName}"/>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15">
                                                <h:outputLabel
                                                        class="control-label">Category </h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:inputText styleClass="form-control" disabled="true"
                                                             value="#{borrowBean.book.BCategory}"/>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <h:outputLabel
                                        styleClass="sub-title margin-left-15 margin-top-5">Copy info</h:outputLabel>
                                <!-- Row 1 -->
                                <div class="form-horizontal form-group row">
                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15">
                                                <h:outputLabel
                                                        class="control-label ">Location </h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:selectOneMenu value="#{borrowBean.selectedLocationId}"
                                                                 style="width:165px">
                                                    <p:ajax listener="#{borrowBean.onLocationChange}"
                                                            update=":requestForm:numCopy"/>
                                                    <f:selectItems value="#{borrowBean.listLocationId}"
                                                                   var="loc"
                                                                   itemLabel="#{borrowBean.getLocationName(loc)}"
                                                    />
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Title -->
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-3 margin-left-15 no-padding-right no-padding-left">
                                                <h:outputLabel
                                                        styleClass=" control-label">Num of copy</h:outputLabel>
                                            </div>
                                            <div class="col-sm-8">
                                                <p:outputLabel styleClass="control-label" id="numCopy"
                                                               value="#{borrowBean.countCopiesOfLocation}"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Submit -->
                        <div class="form-horizontal form-group row">
                            <div class="col-sm-6">
                                <p:commandButton value="Submit" styleClass="pull-right margin-top-20"
                                                 update=":requestForm:numCopy"
                                                 actionListener="#{borrowBean.requestBorrow}"></p:commandButton>
                            </div>

                            <!--<div class="col-sm-6">-->
                            <!--<h:outputText value="Choose Location with Num Of Copy > 0" id="error" rendered="#{!borrowBean.isError}"></h:outputText>-->
                            <!--</div>-->
                        </div>
                    </p:fieldset>

                </div>

                <p:dialog header="Successful!" id="bookDialog" widgetVar="bookDialog" modal="true" closeOnEscape="true"
                          showEffect="fade" hideEffect="fade" resizable="false" width="300"
                          styleClass="text-align-center">
                    <p:outputPanel id="multiCarDetail" style="text-align:center;">
                        Order request successful!
                    </p:outputPanel>
                    <p:commandButton style="text-align: center; margin-top: 10px; margin-bottom: 5px;" value="OK"
                                     action="#{borrowBean.redirectPage}">
                    </p:commandButton>
                </p:dialog>

                <p:dialog header="Error!" id="errorDialog" widgetVar="errorDialog" modal="true" closeOnEscape="true"
                          showEffect="fade" hideEffect="fade" resizable="false" width="200">
                    <p:outputPanel style="text-align:center;">
                        Order request failed!
                    </p:outputPanel>

                </p:dialog>


            </h:form>
        </ui:define>
    </ui:composition>


</h:body>
</html>